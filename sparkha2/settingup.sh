#!/bin/bash

if [ "$1" == "qscguk." ]; then

/home/azureuser/Installationpkg/comman/setenv poiuytrewq
if [ $? -nq 0 ]; then
exit 1
fi
sudo chmod 777 /etc /etc/yum.repos.d /etc/yum.repos.d/CentOS-Base.repo && sudo cat /home/azureuser/Installationpkg/comman/centos.repo >> /etc/yum.repos.d/CentOS-Base.repo && sudo chmod 755 /etc /etc/yum.repos.d && sudo chmod 644 /etc/yum.repos.d/CentOS-Base.repo && sudo yum clean all
if [ $? -eq 0 ]; then
sleep 10
sudo yum install -y /home/azureuser/Installationpkg/comman/rpms/core/bash* /home/azureuser/Installationpkg/comman/rpms/utility/fsarchiver* /home/azureuser/Installationpkg/comman/rpms/utility/mutt* /home/azureuser/Installationpkg/comman/rpms/utility/nc* /home/azureuser/Installationpkg/comman/rpms/utility/tokyocabinet* /home/azureuser/Installationpkg/comman/rpms/utility/urlview* /home/azureuser/Installationpkg/comman/rpms/utility/java-1.7.0-openjdk-devel-1.7.0.151-2.6.11.0.el6_9.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/java-1.7.0-openjdk-1.7.0.151-2.6.11.0.el6_9.x86_64.rpm
if [ $? -eq 0 ]; then
	sleep 10
	sudo yum install -y bash 
	if [ $? -eq 0 ]; then
		sleep 10
		sudo yum install -y /home/azureuser/Installationpkg/comman/rpms/utility/zookeeper-3.4.5+cdh5.13.0+118-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/spark-worker-1.6.0+cdh5.13.0+530-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/spark-python-1.6.0+cdh5.13.0+530-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/spark-master-1.6.0+cdh5.13.0+530-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/solr-4.10.3+cdh5.13.0+519-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/sentry-1.5.1+cdh5.13.0+410-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/parquet-format-2.1.0+cdh5.13.0+18-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/parquet-1.5.0+cdh5.13.0+191-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hive-jdbc-1.1.0+cdh5.13.0+1269-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hive-1.1.0+cdh5.13.0+1269-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/flume-ng-1.6.0+cdh5.13.0+169-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/avro-libs-1.7.6+cdh5.13.0+135-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/bigtop-jsvc-0.6.0+cdh5.13.0+911-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/bigtop-tomcat-0.7.0+cdh5.13.0+0-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/bigtop-utils-0.7.0+cdh5.13.0+0-1.cdh5.13.0.p0.34.el6.noarch.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-0.20-mapreduce-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-client-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-hdfs-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-mapreduce-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm /home/azureuser/Installationpkg/comman/rpms/utility/hadoop-yarn-2.6.0+cdh5.13.0+2639-1.cdh5.13.0.p0.34.el6.x86_64.rpm https://s3-ap-southeast-1.amazonaws.com/app42packege/spark-core-1.6.0%2Bcdh5.13.0%2B530-1.cdh5.13.0.p0.34.el6.noarch.rpm https://s3-ap-southeast-1.amazonaws.com/app42packege/kite-1.0.0%2Bcdh5.13.0%2B145-1.cdh5.13.0.p0.34.el6.noarch.rpm
		if [ $? -eq 0 ]; then
			sudo cp -arf /home/azureuser/Installationpkg/sparkha2/app42RDS /.
			/home/azureuser/Installationpkg/comman/s_Config poiuytrewq
			sudo cp -arf /home/azureuser/Installationpkg/comman/.ssh /root/.
			sudo chown -R root.root /root/.ssh && sudo chmod 700 /root/.ssh && sudo chmod 600 /root/.ssh/authorized_keys /root/.ssh/id_rsa && sudo chmod 644 /root/.ssh/id_rsa.pub
			if [ $? -eq 0 ]; then
				echo "SparkHA2 Configured Successfully"
			else
				echo "SparkHA2 SSH Key Not Installed"
				exit 1
			fi
		else
			echo "SparkHA2 Config Configuration Failed"
			exit 1
		fi
	else
		echo "SparkHA2 Service Could Not Be Installed"
		exit 1
	fi
else
	echo "SparkHA2 Repo Setup Failed"
	exit 1
fi

else
        echo "SparkHA2 CentOS Repo Setup Failed"
        exit 1
fi


else
        echo "You are not authourize person, Please leave now."
        exit
fi
